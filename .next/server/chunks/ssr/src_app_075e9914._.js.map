{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///D:/SAAS/saas-dev/SAAS-UI/src/app/components/CustomTable.jsx"],"sourcesContent":["\"use client\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TablePagination,\n  Box,\n  TextField,\n  IconButton,\n} from \"@mui/material\";\nimport { useState, useMemo } from \"react\";\nimport { ArrowUpward, ArrowDownward, Search } from \"@mui/icons-material\";\n\nconst CustomTable = ({ columns, data, actions }) => {\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n  const [searchText, setSearchText] = useState(\"\");\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: \"asc\" });\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Update handleSort to cycle through unsorted -> asc -> desc\n  const handleSort = (key) => {\n    if (sortConfig.key !== key) {\n      setSortConfig({ key, direction: \"asc\" });\n    } else if (sortConfig.direction === \"asc\") {\n      setSortConfig({ key, direction: \"desc\" });\n    } else if (sortConfig.direction === \"desc\") {\n      setSortConfig({ key: null, direction: null });\n    }\n  };\n\n  // Filter and sort data\n  const filteredSortedData = useMemo(() => {\n    let filtered = data;\n\n    if (searchText) {\n      const lowerText = searchText.toLowerCase();\n      filtered = filtered.filter((row) =>\n        columns.some((col) => {\n          const cellValue = row[col.key];\n          return (\n            cellValue &&\n            cellValue.toString().toLowerCase().includes(lowerText)\n          );\n        })\n      );\n    }\n\n    if (sortConfig.key) {\n      filtered = [...filtered].sort((a, b) => {\n        const aVal = a[sortConfig.key];\n        const bVal = b[sortConfig.key];\n\n        if (aVal === bVal) return 0;\n        if (sortConfig.direction === \"asc\") {\n          return aVal > bVal ? 1 : -1;\n        } else {\n          return aVal < bVal ? 1 : -1;\n        }\n      });\n    }\n\n    return filtered;\n  }, [data, searchText, sortConfig, columns]);\n\n  // Paginate filtered and sorted data\n  const paginatedData = filteredSortedData.slice(\n    page * rowsPerPage,\n    page * rowsPerPage + rowsPerPage\n  );\n\n  return (\n    <>\n      {/* Search */}\n      <Box sx={{ p: 1, display: \"flex\", justifyContent: \"flex-end\" }}>\n        <TextField\n          size=\"small\"\n          variant=\"standard\"\n          placeholder=\"Search...\"\n          value={searchText}\n          onChange={(e) => setSearchText(e.target.value)}\n          InputProps={{\n            startAdornment: <Search sx={{ mr: 1, fontSize: \"1rem\", color: \"action.active\" }} />,\n            disableUnderline: false, // ensures standard underline is visible\n          }}\n          sx={{\n            width: 250,\n            \"& .MuiInputBase-root\": {\n              paddingBottom: \"2px\", // align underline\n            },\n            \"& .MuiInput-input\": {\n              padding: \"4px 0 2px\", // compact height\n              fontSize: \"0.875rem\", // match other fields\n            },\n            \"& .MuiInputAdornment-root\": {\n              mt: \"2px\", // vertically center icon\n            },\n          }}\n        />\n\n      </Box>\n      <TableContainer sx={{ maxHeight: 350 }}>\n        <Table size=\"small\" stickyHeader>\n          <TableHead>\n            <TableRow>\n              {columns.map((col) => (\n                <TableCell\n                  key={col.key}\n                  sx={{\n                    fontWeight: 500,\n                    color: \"#777\",\n                    fontSize: \"13px\",\n                    position: \"sticky\",\n                    top: 0,\n                    zIndex: 2,\n                    backgroundColor: \"#fff\",\n                    whiteSpace: \"nowrap\",\n                    cursor: \"pointer\",\n                    padding: \"8px 16px\",\n                  }}\n                  onClick={() => handleSort(col.key)}\n                >\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n                    {col.icon && <Box sx={{ display: \"flex\" }}>{col.icon}</Box>}\n                    <span>{col.label}</span>\n                    {sortConfig.key === col.key ? (\n                      sortConfig.direction === \"asc\" ? (\n                        <ArrowUpward fontSize=\"small\" />\n                      ) : sortConfig.direction === \"desc\" ? (\n                        <ArrowDownward fontSize=\"small\" />\n                      ) : null\n                    ) : null}\n                  </Box>\n\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n\n          <TableBody>\n            {paginatedData.map((row, rowIndex) => (\n              <TableRow\n                key={row.id || rowIndex}\n                sx={{\n                  height: 36,\n                  \"&:hover\": { backgroundColor: \"#f5f7fa\" },\n                  borderBottom: \"1px solid #e5e7eb\",\n                }}\n              >\n                {columns.map((col, colIndex) => (\n                  <TableCell\n                    key={col.key}\n                    sx={{\n                      fontWeight: col.key !== \"actions\" ? \"bold\" : \"normal\",\n                      color: \"#444\",\n                      fontSize: \"14px\",\n                      borderRight:\n                        colIndex !== columns.length - 1\n                          ? \"1px solid #e5e7eb\"\n                          : \"none\",\n                    }}\n                  >\n                    {col.render ? col.render(row) : row[col.key]}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n            {paginatedData.length === 0 && (\n              <TableRow>\n                <TableCell colSpan={columns.length} align=\"center\">\n                  No records found\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <TablePagination\n        component=\"div\"\n        count={filteredSortedData.length}\n        page={page}\n        onPageChange={handleChangePage}\n        rowsPerPage={rowsPerPage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n        rowsPerPageOptions={[5, 10, 25]}\n      />\n    </>\n\n  );\n};\n\nexport default CustomTable;\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AAAA;AAAA;AAfA;;;;;;;AAiBA,MAAM,cAAc,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,KAAK;QAAM,WAAW;IAAM;IAE3E,MAAM,mBAAmB,CAAC,OAAO;QAC/B,QAAQ;IACV;IAEA,MAAM,0BAA0B,CAAC;QAC/B,eAAe,SAAS,MAAM,MAAM,CAAC,KAAK,EAAE;QAC5C,QAAQ;IACV;IAEA,6DAA6D;IAC7D,MAAM,aAAa,CAAC;QAClB,IAAI,WAAW,GAAG,KAAK,KAAK;YAC1B,cAAc;gBAAE;gBAAK,WAAW;YAAM;QACxC,OAAO,IAAI,WAAW,SAAS,KAAK,OAAO;YACzC,cAAc;gBAAE;gBAAK,WAAW;YAAO;QACzC,OAAO,IAAI,WAAW,SAAS,KAAK,QAAQ;YAC1C,cAAc;gBAAE,KAAK;gBAAM,WAAW;YAAK;QAC7C;IACF;IAEA,uBAAuB;IACvB,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACjC,IAAI,WAAW;QAEf,IAAI,YAAY;YACd,MAAM,YAAY,WAAW,WAAW;YACxC,WAAW,SAAS,MAAM,CAAC,CAAC,MAC1B,QAAQ,IAAI,CAAC,CAAC;oBACZ,MAAM,YAAY,GAAG,CAAC,IAAI,GAAG,CAAC;oBAC9B,OACE,aACA,UAAU,QAAQ,GAAG,WAAW,GAAG,QAAQ,CAAC;gBAEhD;QAEJ;QAEA,IAAI,WAAW,GAAG,EAAE;YAClB,WAAW;mBAAI;aAAS,CAAC,IAAI,CAAC,CAAC,GAAG;gBAChC,MAAM,OAAO,CAAC,CAAC,WAAW,GAAG,CAAC;gBAC9B,MAAM,OAAO,CAAC,CAAC,WAAW,GAAG,CAAC;gBAE9B,IAAI,SAAS,MAAM,OAAO;gBAC1B,IAAI,WAAW,SAAS,KAAK,OAAO;oBAClC,OAAO,OAAO,OAAO,IAAI,CAAC;gBAC5B,OAAO;oBACL,OAAO,OAAO,OAAO,IAAI,CAAC;gBAC5B;YACF;QACF;QAEA,OAAO;IACT,GAAG;QAAC;QAAM;QAAY;QAAY;KAAQ;IAE1C,oCAAoC;IACpC,MAAM,gBAAgB,mBAAmB,KAAK,CAC5C,OAAO,aACP,OAAO,cAAc;IAGvB,qBACE;;0BAEE,8OAAC,wLAAA,CAAA,MAAG;gBAAC,IAAI;oBAAE,GAAG;oBAAG,SAAS;oBAAQ,gBAAgB;gBAAW;0BAC3D,cAAA,8OAAC,0MAAA,CAAA,YAAS;oBACR,MAAK;oBACL,SAAQ;oBACR,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oBAC7C,YAAY;wBACV,8BAAgB,8OAAC,2JAAA,CAAA,UAAM;4BAAC,IAAI;gCAAE,IAAI;gCAAG,UAAU;gCAAQ,OAAO;4BAAgB;;;;;;wBAC9E,kBAAkB;oBACpB;oBACA,IAAI;wBACF,OAAO;wBACP,wBAAwB;4BACtB,eAAe;wBACjB;wBACA,qBAAqB;4BACnB,SAAS;4BACT,UAAU;wBACZ;wBACA,6BAA6B;4BAC3B,IAAI;wBACN;oBACF;;;;;;;;;;;0BAIJ,8OAAC,yNAAA,CAAA,iBAAc;gBAAC,IAAI;oBAAE,WAAW;gBAAI;0BACnC,cAAA,8OAAC,8LAAA,CAAA,QAAK;oBAAC,MAAK;oBAAQ,YAAY;;sCAC9B,8OAAC,0MAAA,CAAA,YAAS;sCACR,cAAA,8OAAC,uMAAA,CAAA,WAAQ;0CACN,QAAQ,GAAG,CAAC,CAAC,oBACZ,8OAAC,0MAAA,CAAA,YAAS;wCAER,IAAI;4CACF,YAAY;4CACZ,OAAO;4CACP,UAAU;4CACV,UAAU;4CACV,KAAK;4CACL,QAAQ;4CACR,iBAAiB;4CACjB,YAAY;4CACZ,QAAQ;4CACR,SAAS;wCACX;wCACA,SAAS,IAAM,WAAW,IAAI,GAAG;kDAEjC,cAAA,8OAAC,wLAAA,CAAA,MAAG;4CAAC,IAAI;gDAAE,SAAS;gDAAQ,YAAY;gDAAU,KAAK;4CAAE;;gDACtD,IAAI,IAAI,kBAAI,8OAAC,wLAAA,CAAA,MAAG;oDAAC,IAAI;wDAAE,SAAS;oDAAO;8DAAI,IAAI,IAAI;;;;;;8DACpD,8OAAC;8DAAM,IAAI,KAAK;;;;;;gDACf,WAAW,GAAG,KAAK,IAAI,GAAG,GACzB,WAAW,SAAS,KAAK,sBACvB,8OAAC,gKAAA,CAAA,UAAW;oDAAC,UAAS;;;;;+FACpB,WAAW,SAAS,KAAK,uBAC3B,8OAAC,kKAAA,CAAA,UAAa;oDAAC,UAAS;;;;;+FACtB,OACF;;;;;;;uCAxBD,IAAI,GAAG;;;;;;;;;;;;;;;sCAgCpB,8OAAC,0MAAA,CAAA,YAAS;;gCACP,cAAc,GAAG,CAAC,CAAC,KAAK,yBACvB,8OAAC,uMAAA,CAAA,WAAQ;wCAEP,IAAI;4CACF,QAAQ;4CACR,WAAW;gDAAE,iBAAiB;4CAAU;4CACxC,cAAc;wCAChB;kDAEC,QAAQ,GAAG,CAAC,CAAC,KAAK,yBACjB,8OAAC,0MAAA,CAAA,YAAS;gDAER,IAAI;oDACF,YAAY,IAAI,GAAG,KAAK,YAAY,SAAS;oDAC7C,OAAO;oDACP,UAAU;oDACV,aACE,aAAa,QAAQ,MAAM,GAAG,IAC1B,sBACA;gDACR;0DAEC,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC;+CAXvC,IAAI,GAAG;;;;;uCATX,IAAI,EAAE,IAAI;;;;;gCAyBlB,cAAc,MAAM,KAAK,mBACxB,8OAAC,uMAAA,CAAA,WAAQ;8CACP,cAAA,8OAAC,0MAAA,CAAA,YAAS;wCAAC,SAAS,QAAQ,MAAM;wCAAE,OAAM;kDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS7D,8OAAC,4NAAA,CAAA,kBAAe;gBACd,WAAU;gBACV,OAAO,mBAAmB,MAAM;gBAChC,MAAM;gBACN,cAAc;gBACd,aAAa;gBACb,qBAAqB;gBACrB,oBAAoB;oBAAC;oBAAG;oBAAI;iBAAG;;;;;;;;AAKvC;uCAEe","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///D:/SAAS/saas-dev/SAAS-UI/src/app/components/ErrorPage.jsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { Box, Typography, Button } from \"@mui/material\";\r\nimport { WarningAmber, CloudOff, BugReport } from \"@mui/icons-material\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ErrorPage = ({ code = 500, message, onRetry }) => {\r\n    // choose icon & message based on code\r\n    const errorConfig = {\r\n        400: {\r\n            icon: <WarningAmber color=\"warning\" sx={{ fontSize: 60 }} />,\r\n            title: \"Bad Request\",\r\n            desc: message || \"The request was invalid or cannot be processed.\",\r\n        },\r\n        404: {\r\n            icon: <CloudOff color=\"disabled\" sx={{ fontSize: 60 }} />,\r\n            title: \"Not Found\",\r\n            desc: message || \"The requested data could not be found.\",\r\n        },\r\n        500: {\r\n            icon: <BugReport color=\"error\" sx={{ fontSize: 60 }} />,\r\n            title: \"Server Error\",\r\n            desc: message || \"Something went wrong on our end.\",\r\n        },\r\n        default: {\r\n            icon: <WarningAmber color=\"error\" sx={{ fontSize: 60 }} />,\r\n            title: \"Unexpected Error\",\r\n            desc: message || \"An unknown error occurred.\",\r\n        },\r\n    };\r\n\r\n    const { icon, title, desc } = errorConfig[code] || errorConfig.default;\r\n\r\n    return (\r\n        <Box\r\n            component={motion.div}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.4 }}\r\n            sx={{\r\n                height: \"80vh\",\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                gap: 2,\r\n                textAlign: \"center\",\r\n            }}\r\n        >\r\n            {icon}\r\n            <Typography variant=\"h5\" color=\"text.primary\" fontWeight=\"600\">\r\n                {title}\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ maxWidth: 400 }}>\r\n                {desc}\r\n            </Typography>\r\n            {onRetry && (\r\n                <Button variant=\"outlined\" color=\"primary\" onClick={onRetry}>\r\n                    Retry\r\n                </Button>\r\n            )}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default ErrorPage;\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAJA;;;;;;;;AAMA,MAAM,YAAY,CAAC,EAAE,OAAO,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE;IAC/C,sCAAsC;IACtC,MAAM,cAAc;QAChB,KAAK;YACD,oBAAM,8OAAC,iKAAA,CAAA,UAAY;gBAAC,OAAM;gBAAU,IAAI;oBAAE,UAAU;gBAAG;;;;;;YACvD,OAAO;YACP,MAAM,WAAW;QACrB;QACA,KAAK;YACD,oBAAM,8OAAC,6JAAA,CAAA,UAAQ;gBAAC,OAAM;gBAAW,IAAI;oBAAE,UAAU;gBAAG;;;;;;YACpD,OAAO;YACP,MAAM,WAAW;QACrB;QACA,KAAK;YACD,oBAAM,8OAAC,8JAAA,CAAA,UAAS;gBAAC,OAAM;gBAAQ,IAAI;oBAAE,UAAU;gBAAG;;;;;;YAClD,OAAO;YACP,MAAM,WAAW;QACrB;QACA,SAAS;YACL,oBAAM,8OAAC,iKAAA,CAAA,UAAY;gBAAC,OAAM;gBAAQ,IAAI;oBAAE,UAAU;gBAAG;;;;;;YACrD,OAAO;YACP,MAAM,WAAW;QACrB;IACJ;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,WAAW,CAAC,KAAK,IAAI,YAAY,OAAO;IAEtE,qBACI,8OAAC,wLAAA,CAAA,MAAG;QACA,WAAW,0LAAA,CAAA,SAAM,CAAC,GAAG;QACrB,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;QAAI;QAC5B,IAAI;YACA,QAAQ;YACR,SAAS;YACT,eAAe;YACf,YAAY;YACZ,gBAAgB;YAChB,KAAK;YACL,WAAW;QACf;;YAEC;0BACD,8OAAC,6MAAA,CAAA,aAAU;gBAAC,SAAQ;gBAAK,OAAM;gBAAe,YAAW;0BACpD;;;;;;0BAEL,8OAAC,6MAAA,CAAA,aAAU;gBAAC,SAAQ;gBAAQ,OAAM;gBAAiB,IAAI;oBAAE,UAAU;gBAAI;0BAClE;;;;;;YAEJ,yBACG,8OAAC,iMAAA,CAAA,SAAM;gBAAC,SAAQ;gBAAW,OAAM;gBAAU,SAAS;0BAAS;;;;;;;;;;;;AAM7E;uCAEe","debugId":null}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///D:/SAAS/saas-dev/SAAS-UI/src/app/dashboard/location-master/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    IconButton,\r\n    Tooltip,\r\n    CircularProgress,\r\n    Typography,\r\n} from \"@mui/material\";\r\nimport { motion } from \"framer-motion\";\r\nimport CustomTable from \"@/app/components/CustomTable\";\r\nimport { FiPlus } from \"react-icons/fi\";\r\nimport * as MuiIcons from \"@mui/icons-material\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { getApi } from \"@/utils/getApiMethod\";\r\nimport ErrorPage from \"@/app/components/ErrorPage\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n    getAll as getAllVehicles,\r\n    deleteItem as deleteVehicle,\r\n    selectVehicleList,\r\n    selectVehicleLoading,\r\n    selectVehicleError,\r\n} from \"@/store/features/vehicleSlice\";\r\n\r\nexport default function LocationList() {\r\n    const router = useRouter();\r\n    const dispatch = useDispatch();\r\n\r\n    const vehicles = useSelector(selectVehicleList);\r\n    const loading = useSelector(selectVehicleLoading);\r\n    const error = useSelector(selectVehicleError);\r\n\r\n    const [columns, setColumns] = useState([]);\r\n    const [loadingColumns, setLoadingColumns] = useState(true);\r\n    const [errorState, setErrorState] = useState(null);\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Are you sure you want to delete this user?\")) return;\r\n\r\n        try {\r\n            const result = await dispatch(deleteVehicle(id)).unwrap();\r\n            console.log(\"âœ… Deleted user:\", result);\r\n\r\n            // Refresh the list\r\n            dispatch(getAllVehicles());\r\n        } catch (error) {\r\n            console.error(\"âŒ Delete failed:\", error);\r\n        }\r\n    };\r\n\r\n\r\n    // âœ… Fetch table columns dynamically\r\n    const fetchColumns = async () => {\r\n        try {\r\n            setLoadingColumns(true);\r\n            const result = await getApi(\"/fieldindex01/table?entity_name=Vehicle\");\r\n            if (!result || !result.data) {\r\n                throw { code: 404, message: \"No columns found for Location table.\" };\r\n            }\r\n\r\n            const dynamicColumns = result.data.map((col) => ({\r\n                key: col.key,\r\n                label: col.label,\r\n                icon: col.icon\r\n                    ? React.createElement(MuiIcons[col.icon], { fontSize: \"small\" })\r\n                    : null,\r\n            }));\r\n\r\n            // âœ… Add Actions column\r\n            const actionColumn = {\r\n                key: \"actions\",\r\n                label: \"Actions\",\r\n                icon: <MuiIcons.Settings fontSize=\"small\" />,\r\n                render: (row) => (\r\n                    <Box sx={{ display: \"flex\", gap: 1 }}>\r\n                        <Tooltip title=\"Edit\">\r\n                            <IconButton\r\n                                size=\"small\"\r\n                                onClick={() =>\r\n                                    router.push(`/dashboard/location-master/edit/${row.vehicle_id}`)\r\n                                }\r\n                            >\r\n                                <MuiIcons.EditOutlined fontSize=\"small\" />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Delete\">\r\n                            <IconButton size=\"small\" onClick={() => handleDelete(row.vehicle_id)}>\r\n                                <MuiIcons.DeleteOutlineOutlined fontSize=\"small\" />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </Box>\r\n                ),\r\n            };\r\n\r\n            setColumns([...dynamicColumns, actionColumn]);\r\n            setErrorState(null);\r\n        } catch (error) {\r\n            console.error(\"Error loading columns:\", error);\r\n            setErrorState({\r\n                code: error.code || 500,\r\n                message: error.message || \"Failed to load location table columns.\",\r\n            });\r\n        } finally {\r\n            setLoadingColumns(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const ws = new WebSocket(\"ws://localhost:8000/ws/vehicles\");\r\n\r\n        ws.onopen = () => console.log(\"âœ… WebSocket connected\");\r\n        ws.onmessage = (event) => {\r\n            try {\r\n                const msg = JSON.parse(event.data);\r\n                console.log(\"ðŸ”” WebSocket event:\", msg);\r\n\r\n                if (\r\n                    msg.event === \"vehicle_added\" ||\r\n                    msg.event === \"vehicle_updated\" ||\r\n                    msg.event === \"vehicle_deleted\"\r\n                ) {\r\n                    // Re-fetch vehicles automatically\r\n                    dispatch(getAllVehicles());\r\n                }\r\n            } catch (e) {\r\n                console.error(\"WebSocket parse error:\", e);\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => console.log(\"âŒ WebSocket disconnected\");\r\n\r\n        return () => ws.close();\r\n    }, [dispatch]);\r\n\r\n    // âœ… Fetch vehicles via Redux\r\n    const fetchVehicleData = async () => {\r\n        try {\r\n            await dispatch(getAllVehicles()).unwrap();\r\n        } catch (error) {\r\n            console.error(\"Error fetching vehicles:\", error);\r\n        }\r\n    };\r\n\r\n    // âœ… First load columns, then data\r\n    useEffect(() => {\r\n        const loadSequentially = async () => {\r\n            await fetchColumns();\r\n            await fetchVehicleData();\r\n        };\r\n        loadSequentially();\r\n    }, []);\r\n\r\n    // === Render ===\r\n    if (loadingColumns) {\r\n        return (\r\n            <Box\r\n                sx={{\r\n                    height: \"80vh\",\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    gap: 2,\r\n                }}\r\n            >\r\n                <CircularProgress size={48} color=\"primary\" />\r\n                <Typography variant=\"body1\" color=\"text.secondary\">\r\n                    Loading Table Structure...\r\n                </Typography>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    if (errorState) {\r\n        return (\r\n            <ErrorPage\r\n                code={errorState.code}\r\n                message={errorState.message}\r\n                onRetry={() => {\r\n                    setErrorState(null);\r\n                    fetchColumns().then(fetchVehicleData);\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.9, x: -20 }}\r\n            animate={{ opacity: 1, scale: 1, x: 0 }}\r\n            exit={{ opacity: 0, scale: 0.9, x: 20 }}\r\n            transition={{ duration: 1, ease: [0.4, 0, 0.2, 1] }}\r\n        >\r\n            <Box sx={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                {/* Header */}\r\n                <div className=\"flex items-center\">\r\n                    <h4 className=\"ml-2 text-md font-semibold !text-gray-400\">\r\n                        Location List\r\n                    </h4>\r\n                </div>\r\n\r\n                {/* Tabs / Filters */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"tab-item\">\r\n                            <MuiIcons.LocalShippingOutlined fontSize=\"small\" />\r\n                            <span>All Location</span>\r\n                        </div>\r\n                        <div className=\"tab-item\">\r\n                            <MuiIcons.LocalShipping fontSize=\"inherit\" style={{ fontSize: 14 }} />\r\n                            <span>Active Location</span>\r\n                        </div>\r\n                        <div className=\"tab-item\">\r\n                            <MuiIcons.GarageOutlined fontSize=\"small\" />\r\n                            <span>InActive Location</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Button\r\n                        className=\"btn-primary\"\r\n                        sx={{ textTransform: \"none\" }}\r\n                        onClick={() => router.push(\"/dashboard/location-master/add\")}\r\n                        startIcon={<FiPlus style={{ fontSize: 16 }} />}\r\n                    >\r\n                        Add Location\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Table */}\r\n                {loading.getAll ? (\r\n                    <Box\r\n                        sx={{\r\n                            height: \"50vh\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                        }}\r\n                    >\r\n                        <CircularProgress size={32} color=\"primary\" />\r\n                        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 2 }}>\r\n                            Loading Location Data...\r\n                        </Typography>\r\n                    </Box>\r\n                ) : error.getAll ? (\r\n                    <ErrorPage\r\n                        code={500}\r\n                        message={error.getAll}\r\n                        onRetry={fetchVehicleData}\r\n                    />\r\n                ) : (\r\n                    <CustomTable columns={columns} data={vehicles} />\r\n                )}\r\n            </Box>\r\n        </motion.div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}